<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Special Day ğŸ’–</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/animations.css">
<link rel="stylesheet" href="css/cursor.css">
</head>
<body class="pink-bg page-enter">
<div class="nav">
<button onclick="goBack()">ğŸ’— Back</button>
<button onclick="goHome()">ğŸ  Home</button>
</div>
<img id="poster" class="poster">
<p class="note">A little piece of my heart for you ğŸ’—</p>
<script src="js/hearts.js"></script>
<script>
const d = new URLSearchParams(location.search).get("day") || "7";

/* ğŸ’ PROPOSE DAY â€“ 8 FEB */
if (d === "8") {
  document.body.innerHTML = `
    <div class="pink-bg page-enter">
      <div class="nav">
        <button onclick="goHome()">ğŸ  Home</button>
      </div>

      <h1>ğŸ’ Propose Day</h1>
      <p>I have one question for youâ€¦</p>

      <div class="proposal-box">
        <button class="yes-btn" onclick="sayYes(event)">ğŸ’– Yes</button>
        <button class="no-btn" id="noBtn">ğŸ™ˆ No</button>
      </div>

      <p id="tease" class="hidden tease-text">
        Heyyâ€¦ donâ€™t be shy ğŸ˜Œ
      </p>
    </div>
  `;

  document.getElementById("noBtn").addEventListener("mouseover", moveButton);

} else {
  /* NORMAL DAYS */
  poster.src = `assets/images/day${d}.jpg`;

  poster.onerror = () => {
    poster.src = "assets/images/day7.jpg";
  };
}

/* ğŸ˜œ NO BUTTON RUNS AWAY */
function moveButton() {
  const btn = document.getElementById("noBtn");
  const tease = document.getElementById("tease");

  const x = Math.random() * 200 - 100;
  const y = Math.random() * 200 - 100;

  btn.style.transform = `translate(${x}px, ${y}px)`;
  tease.classList.remove("hidden");
}

/* ğŸ’“ HEART BURST + REDIRECT */
function heartBurst(x, y) {
  for (let i = 0; i < 18; i++) {
    const heart = document.createElement("div");
    heart.className = "heart-burst";
    heart.innerText = "ğŸ’“";

    heart.style.left = x + "px";
    heart.style.top = y + "px";
    heart.style.setProperty("--x", (Math.random() * 200 - 100) + "px");
    heart.style.setProperty("--y", (Math.random() * 200 - 100) + "px");

    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 1200);
  }
}

function sayYes(event) {
  const rect = event.target.getBoundingClientRect();
  heartBurst(rect.left + rect.width / 2, rect.top + rect.height / 2);

  setTimeout(() => {
    location.href = "propose.html";
  }, 1800);
}

function goBack(){ location.href="calendar.html"; }
function goHome(){ location.href="calendar.html"; }
</script>
</body>
</html>
